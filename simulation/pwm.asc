Version 4
SHEET 1 1372 680
WIRE 752 -368 752 -416
WIRE 752 -256 752 -288
WIRE 864 -256 752 -256
WIRE 976 -256 944 -256
WIRE 752 -160 752 -256
WIRE 784 -160 752 -160
WIRE 976 -144 976 -256
WIRE 976 -144 848 -144
WIRE 1008 -144 976 -144
WIRE 1056 -144 1008 -144
WIRE -32 -128 -64 -128
WIRE 48 -128 -32 -128
WIRE 448 -128 384 -128
WIRE 528 -128 448 -128
WIRE 688 -128 608 -128
WIRE 736 -128 688 -128
WIRE 784 -128 736 -128
WIRE 816 -64 816 -112
WIRE 1056 -64 1056 -144
WIRE 688 -48 688 -128
WIRE -64 -32 -64 -128
WIRE 384 -32 384 -128
WIRE 1312 -32 1312 -96
WIRE 1056 80 1056 16
WIRE -64 96 -64 48
WIRE 384 96 384 48
WIRE 688 96 688 16
WIRE 1312 96 1312 48
FLAG -64 96 0
FLAG 384 96 0
FLAG -32 -128 in
FLAG 448 -128 out
FLAG 688 96 0
FLAG 736 -128 sine
FLAG 816 -64 0
FLAG 1312 96 0
FLAG 1312 -96 V+
FLAG 816 -176 V+
FLAG 752 -416 0
FLAG 1008 -144 Vf
FLAG 1056 80 0
SYMBOL voltage -64 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(1.65 1.65 90)
SYMBOL bv 384 -48 R0
SYMATTR InstName B1
SYMATTR Value V=3.3*((time/period-int(time/period))<V(in)/3.3)
SYMBOL res 624 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 2k
SYMBOL cap 672 -48 R0
SYMATTR InstName C1
SYMATTR Value 100nF
SYMBOL OpAmps\\OP292 816 -208 R0
SYMATTR InstName U1
SYMBOL voltage 1312 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 960 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL res 768 -272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 1040 -80 R0
SYMATTR InstName R4
SYMATTR Value 100k
TEXT -96 120 Left 2 !.tran 0 150ms 100ms 100ns
TEXT -368 -72 Left 2 !.param period=0.027ms
